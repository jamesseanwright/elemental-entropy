e=a.width/2,f=a.height/2,g=0,h=0,k=!0,l={C:function(){this.x=e;this.y=f;this.l=0;this.b=75;a.onmousemove=function(b){100<b.clientX&&b.clientX<a.width-100&&l.r(b)}},r:function(b){this.l=(b.clientX-a.width)/a.width*Math.PI*2+Math.PI},m:function(){c.strokeStyle="#fff";c.beginPath();c.arc(this.x,this.y,this.b,this.i().A,this.i().e);c.stroke()},i:function(){return{A:this.l-Math.PI/4,e:this.l+Math.PI/4}},h:function(b){return m(this,b)&&Math.atan2(b.y-f,b.x-e)>=this.i().A&&Math.atan2(b.y-f,b.x-e)<=this.i().e},
g:function(b){b.D=!0;b.o=-1*b.o;b.s=-1*b.s;g+=10;0===g%100&&h++}};function n(b){b=b||{};this.j=b.j;this.b=b.b||p;this.fill=this.j?"#00f":q[Math.random()*q.length|0];this.g=b.g;this.h=b.h;b.x&&b.y?(this.x=b.x,this.y=b.y):Math.random()+.5|0?(this.y=Math.random()+.5|0?a.height-(a.height/6-a.height/6*Math.random()):a.height/6-a.height/6*Math.random(),this.x=r(this)):(this.x=Math.random()*a.width,this.y=r(this));this.o=(e-this.x)/e*5;this.s=(f-this.y)/f*5*a.height/a.width;this.j&&t.u.call(t,this)}
p=25,u=[],v=0,q=["#f60","#088"];function w(){u=u.filter(function(b){return!b.v})}n.prototype.m=function(){c.fillStyle=this.fill;c.shadowColor=this.fill;c.shadowBlur=100;c.beginPath();c.arc(this.x,this.y,this.b,0,2*Math.PI);c.fill()};function r(b){d=a.width;return Math.random()+.5|0?d+b.b:0-b.b}n.prototype.move=function(){this.x+=this.o;this.y+=this.s};
t={f:[],u:function(b){b.w=!0;this.f.push(b)},F:function(b){this.f=this.f.filter(function(d){return b!==d})},B:function(b){if(!b.w&&!b.D&&k)for(d in this.f)this.f[d].h(b)&&this.f[d].g&&this.f[d].g(b)}};l.C();t.u.call(t,l);u.push(new n({j:!0,b:45,x:e,y:f,g:x,h:function(b){return m(this,b)}}));function m(b,d){return Math.sqrt((b.x-d.x)*(b.x-d.x)+(b.y-d.y)*(b.y-d.y))<b.b+d.b}y();function x(){this.v=!0;t.F(this);k=!1}
function y(b){c.fillStyle="#000";c.fillRect(0,0,a.width,a.height);w();b-v>=1500-100*h&&(u.push(new n(void 0)),v=b);for(aa in u)u[aa].m(),u[aa].w||(u[aa].move(),b=u[aa],u[aa].v=b.x>a.width+b.b+1||b.x<0-(b.b+1)||b.y>a.height+b.b+1||b.y<0-(b.b+1)),t.B(u[d]);l.m();c.fillStyle="#fff";c.font="26px Arial";c.fillText(g,20,40);k||c.fillText("BOOM",e-40,f);requestAnimationFrame(y)};
